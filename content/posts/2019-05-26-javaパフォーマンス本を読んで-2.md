---
template: post
title: 'Javaパフォーマンス本を読んで #2'
slug: /posts/read-java-performance-2/
draft: true
date: 2019-05-26T02:23:20.933Z
description: 'Javaパフォーマンス本読んで#2 Javaパフォーマンスのツールボックス'
category: BOOK
tags:
  - Java
---
# 第3章 Javaパフォーマンスのツールボックス
パフォーマンス分析は可視化と表裏一体です。アプリケーションの内部や、その実行環境で起こっていることを知るのがパフォーマンス分析で、可視化にはツールが不可欠です。

## オペレーティングシステム付属のツールと分析
プログラムの分析の手始めになるツールは、Javaとの直接の関係はまったくなく、OSに付属している、基本的な監視のツールを利用します。  
パフォーマンステストを行う際には、OSからもCPUとメモリ、ディスクの使用率は最低限収集すべきです。ネットワークを利用するプログラムでは、ネットワークの使用率も必要です。

### CPUの使用率
CPUの使用率の値はある一定の期間（1秒 or 5秒 or 30秒）の平均値を表しています。CPUの使用率とは、プログラムがどの程度効率的にCPUを使えているかということを表しているので、この値が大きければ大きいほど望ましい状態になります。

### ディスクの使用率
ディスクの使用率を監視することには、2つの大きな意味があります。1つ目は、アプリケーション自体に関わるものです。2つ目は、システムがスワッピングを行なっているかどうかわかるという点です。

### ネットワークの使用率
ネットワークを利用するアプリケーションでは、ネットワークのトラフィックも監視しなければなりません。UNIXシステムでの基本的なネットワーク監視ツールとしては、netstatがよく使われます。

## Javaの監視ツール
JVM自体に関する情報を得るには、Java向けの監視ツールが必要です。以下のようなツールがJDKに付属しています。
- jcmd  
指定されたJavaのプロセスについて、クラスやスレッドそしてJVMの基本的な情報を出力します。

- jconsole  
JVMのアクティビティをグラフィカルに表現します。スレッドやクラスの利用状況、ガベージコレクションの内容などがわかります。

- jhat  
メモリのヒープダンプを分析しやすい形で出力します。事後的な分析に利用されます。

- jmap  
ヒープダンプや、JVMでのメモリの使用に関する情報を出力します。

- jinfo
JVMのシステムプロパティを表示します。一部のシステムプロパティについては、あたいの変更も行えます。

- jstack  
Javaのプロセスのスタックをダンプします。

- jstat  
ガベージコレクションやクラスローディングのアクティビティに関する情報を出力します。

- jvisualvm  
JVMの監視、実行中のアプリケーションに対するプロファイリング、JVMのヒープダンプの分析のためのGUIツールです。

  
